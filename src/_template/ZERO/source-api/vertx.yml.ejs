server:
  port: ${Z_API_PORT:7185}
  address: ${Z_API_HOST:0.0.0.0}
vertx:
  application:
    name: ${Z_APP:r2mo-app-momo}              # ---> ğŸ’»ï¸ å¾®æœåŠ¡åç§°
  config:
    instance:
      - name: <%= appName %>-001
        options:
          maxEventLoopExecuteTime: 1200_000_000_000
          maxWorkerExecuteTime: 1200_000_000_000

          # ğŸš€ã€æ ¸å¿ƒä¼˜åŒ– 1ã€‘EventLoop çº¿ç¨‹æ± 
          # å…¬å¼ï¼šCPUæ ¸æ•°(12) * 2 = 24
          # åŸæ¥çš„ 128 å¤ªå¤§ï¼Œå¯¼è‡´ CPU é¢‘ç¹åˆ‡æ¢ä¸Šä¸‹æ–‡ï¼Œé™ä½æ€§èƒ½
          eventLoopPoolSize: 24

          # ğŸš€ã€æ ¸å¿ƒä¼˜åŒ– 2ã€‘Worker çº¿ç¨‹æ±  (é˜»å¡ä»»åŠ¡æ± )
          # å¦‚æœä½ çš„ä¸šåŠ¡ä¸»è¦æ˜¯æŸ¥æ•°æ®åº“ï¼Œè¿™ä¸ªå€¼å¯ä»¥å¤§ä¸€ç‚¹ (64 - 128 ä¹‹é—´)
          # å¦‚æœå¤ªå°ï¼Œé«˜å¹¶å‘æŸ¥åº“æ—¶ä¼šç”±æ’é˜Ÿç°è±¡ï¼›å¤ªå¤§åˆ™æµªè´¹å†…å­˜ã€‚
          # å»ºè®®å…ˆé™åˆ° 64 æˆ– 128ï¼ŒåŸ 256 ç•¥æ˜¾æ¿€è¿›
          workerPoolSize: 128

          # å†…éƒ¨é˜»å¡æ± ï¼Œé€šå¸¸ä¸éœ€è¦å¤ªå¤§ï¼Œ32-64 å³å¯
          internalBlockingPoolSize: 32
    delivery:
      timeout: 180_000
    deployment:
      worker:
        # ğŸš€ã€æ ¸å¿ƒä¼˜åŒ– 3ã€‘Worker Verticle å®ä¾‹æ•°
        # ä¸éœ€è¦å¤ªå¤šï¼ŒVert.x ä¼šå¤ç”¨ Worker çº¿ç¨‹æ± 
        # è®¾ç½®ä¸º CPU æ ¸æ•° x 2 æˆ– x 4 å³å¯
        instances: 32
        # è¿™é‡Œçš„ workerPoolSize æ˜¯è¦†ç›–ä¸Šé¢å…¨å±€é…ç½®çš„ï¼Œä¿æŒä¸€è‡´æˆ–æŒ‰éœ€è°ƒæ•´
        workerPoolSize: 128
      agent:
        # ğŸš€ã€æ ¸å¿ƒä¼˜åŒ– 4ã€‘Agent (Http Server) å®ä¾‹æ•°
        # å¿…é¡»ä¸¥æ ¼ç­‰äº eventLoopPoolSizeï¼Œå®ç° 1:1 ç»‘å®š
        # è¿™æ ·æ¯ä¸ª CPU æ ¸å¿ƒåªè´Ÿè´£ 2 ä¸ª Server å®ä¾‹ï¼Œæ•ˆç‡æœ€é«˜
        instances: 24
  mvc:
    cors:
      allow-credentials: true
      allowed-origins:
        - "*"
  datasource:
    dynamic:
      primary: master
      strict: false
      datasource:
        # master åº“åŒ datasourceï¼Œå…¶ä»–ä¸¤åº“å¯åˆ†ç¦»ï¼Œä¸å¼€å¯åŠ¨æ€çš„æ¨¡å¼ä¸‹ç›´æ¥ä½¿ç”¨ datasource é…ç½®
        master:
          url: ${Z_DBS_URL:jdbc:mysql://ox.engine.cn:3306/DB_HOTEL_004?useUnicode=true&characterEncoding=UTF-8&zeroDateTimeBehavior=convertToNull&serverTimezone=Asia/Shanghai&useSSL=false&allowPublicKeyRetrieval=true}
          instance: ${Z_DBS_INSTANCE:DB_HOTEL_004}
          hostname: ${vertx.datasource.hostname}
          port: ${vertx.datasource.port}
          username: ${vertx.datasource.username}
          password: ${vertx.datasource.password}
    hostname: ${Z_DB_HOST:ox.engine.cn}
    port: ${Z_DB_PORT:3306}
    username: ${Z_DB_APP_USER:r2mo}
    password: ${Z_DB_APP_PASS:r2mo}
    driver-class-name: "com.mysql.cj.jdbc.Driver"
# ------------------- ä¸šåŠ¡ç¯å¢ƒç»¼è¿°
# ğŸ“Œ åº”ç”¨ç®¡ç†
app:
  id: "<%= appId %>"
  ns: "<%= appNs %>"
  tenant: "<%= appTenant %>"